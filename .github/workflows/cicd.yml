name: E2E Tests

on:
  workflow_dispatch:
    inputs:
      testPath:
        description: 'Path to tests to be executed'
        default: ''

jobs:
  E2E Tests:
    runs-on: windows-latest
    permissions:
      checks: write
      steps:
        - name: Checkout Code
          uses: actions/checkout@v4

        - name: Setup Java JDK
          uses: actions/setup-java@v4
          with:
            distrbution: 'zulu'
            java-version: '21'

        - name: Setup Maven
          uses: stCarolas/setup-maven@v5
          with:
            maven-version: 3.9.9

        - name: Execute Tests
          run: mvn -Dtest="${{ github.event.inputs.testPath }}" test

        - name: Publish report
          continue-on-error: true
          uses: dorny/test-reporter@v1
          if: success() || failure()
          with:
            name: Tests Report
            path: 'target/surefire-reports'
            reporter : java-junit
